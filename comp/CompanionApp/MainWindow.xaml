<Window x:Class="CompanionApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="das-KRT Companion App" Height="780" Width="980"
        WindowStartupLocation="CenterScreen">
  <Grid Margin="16">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,12">
      <TextBlock Text="Status:" FontWeight="SemiBold" Margin="0,0,8,0" />
      <TextBlock Text="{Binding StatusText}" />
      <TextBlock Text="  |  " Margin="8,0" />
      <TextBlock Text="Streaming:" FontWeight="SemiBold" Margin="0,0,8,0" />
      <TextBlock Text="{Binding StreamingIndicator}" />
      <TextBlock Text="  |  " Margin="8,0" />
      <TextBlock Text="Mumble:" FontWeight="SemiBold" Margin="0,0,8,0" />
      <TextBlock Text="{Binding MumbleConnectionIndicator}" />
    </StackPanel>

    <Grid Grid.Row="1" Margin="0,0,0,12">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>

      <StackPanel Grid.Column="0" Margin="0,0,12,0">
        <TextBlock Text="Server Base URL" />
        <TextBox Text="{Binding ServerBaseUrl, UpdateSourceTrigger=PropertyChanged}" Margin="0,4,0,8" />

        <TextBlock Text="Admin Token" />
        <TextBox Text="{Binding AdminToken, UpdateSourceTrigger=PropertyChanged}" Margin="0,4,0,0" />
      </StackPanel>

      <StackPanel Grid.Column="1">
        <TextBlock Text="Discord User ID" />
        <TextBox Text="{Binding DiscordUserId, UpdateSourceTrigger=PropertyChanged}" Margin="0,4,0,8" />

        <TextBlock Text="Radio Slot" />
        <TextBox Text="{Binding RadioSlot, UpdateSourceTrigger=PropertyChanged}" Margin="0,4,0,8" />

        <TextBlock Text="Sample Rate" />
        <TextBox Text="{Binding SampleRate, UpdateSourceTrigger=PropertyChanged}" Margin="0,4,0,0" />
      </StackPanel>
    </Grid>

    <!-- Mumble Server Settings -->
    <GroupBox Header="Mumble Server" Grid.Row="2" Margin="0,0,0,12">
      <Grid Margin="8">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,8,0">
          <TextBlock Text="Host" />
          <TextBox Text="{Binding MumbleHost, UpdateSourceTrigger=PropertyChanged}" Margin="0,4,0,0" />
        </StackPanel>

        <StackPanel Grid.Column="1" Grid.Row="0" Margin="0,0,8,0" Width="80">
          <TextBlock Text="Port" />
          <TextBox Text="{Binding MumblePort, UpdateSourceTrigger=PropertyChanged}" Margin="0,4,0,0" />
        </StackPanel>

        <StackPanel Grid.Column="2" Grid.Row="0" Margin="0,0,8,0">
          <TextBlock Text="Username (optional)" />
          <TextBox Text="{Binding MumbleUsername, UpdateSourceTrigger=PropertyChanged}" Margin="0,4,0,0" />
        </StackPanel>

        <StackPanel Grid.Column="3" Grid.Row="0" Margin="0,0,8,0">
          <TextBlock Text="Password (optional)" />
          <PasswordBox x:Name="MumblePasswordBox" Margin="0,4,0,0" PasswordChanged="MumblePasswordBox_PasswordChanged" />
        </StackPanel>

        <StackPanel Grid.Column="4" Grid.Row="0" VerticalAlignment="Bottom">
          <Button Content="Connect" Width="80" Click="MumbleConnect_Click" />
        </StackPanel>


      </Grid>
    </GroupBox>

    <GroupBox Header="Hotkey Bindings" Grid.Row="3">
      <DataGrid ItemsSource="{Binding Bindings}" AutoGenerateColumns="False" CanUserAddRows="True">
        <DataGrid.Columns>
          <DataGridCheckBoxColumn Header="Enabled" Binding="{Binding IsEnabled}" Width="80" />
          <DataGridTextColumn Header="Freq ID" Binding="{Binding FreqId, UpdateSourceTrigger=PropertyChanged}" Width="100" />
          <DataGridTextColumn Header="Hotkey" Binding="{Binding Hotkey, UpdateSourceTrigger=PropertyChanged}" Width="200" />
          <DataGridTextColumn Header="Channel Name" Binding="{Binding ChannelName, UpdateSourceTrigger=PropertyChanged}" Width="200" />
          <DataGridTextColumn Header="Label" Binding="{Binding Label, UpdateSourceTrigger=PropertyChanged}" Width="*" />
        </DataGrid.Columns>
      </DataGrid>
    </GroupBox>

    <StackPanel Orientation="Horizontal" Grid.Row="4" Margin="0,12,0,0" HorizontalAlignment="Right">
      <Button Content="Reload" Width="90" Margin="0,0,8,0" Click="Reload_Click" />
      <Button Content="Save" Width="90" Margin="0,0,8,0" Click="Save_Click" />
      <Button Content="Open Config Folder" Width="160" Margin="0,0,8,0" Click="OpenConfig_Click" />
      <Button Content="Start Test" Width="100" Margin="0,0,8,0" Click="StartTest_Click" />
      <Button Content="Stop Test" Width="100" Click="StopTest_Click" />
    </StackPanel>
  </Grid>
</Window>
